<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Types and Terror</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <script src="https://kit.fontawesome.com/c85306ca98.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="about.html"><strong aria-hidden="true">1.</strong> About</a></li><li class="chapter-item expanded "><a href="posts/2018-06-07-setting-up-a-blog.html"><strong aria-hidden="true">2.</strong> Setting up a Blog with Git</a></li><li class="chapter-item expanded "><a href="posts/2018-07-02-strategies-for-returning-references-in-Rust.html"><strong aria-hidden="true">3.</strong> Strategies for returning references in Rust</a></li><li class="chapter-item expanded "><a href="posts/2018-10-01-init.vim-(the-best-bits).html"><strong aria-hidden="true">4.</strong> init.vim</a></li><li class="chapter-item expanded "><a href="posts/2018-10-05-lost-13kb-of-js.html"><strong aria-hidden="true">5.</strong> Lost - 13kb of js</a></li><li class="chapter-item expanded "><a href="posts/2018-11-01-the-curious-case-of-foldable-either.html"><strong aria-hidden="true">6.</strong> The curious case of Either's Foldable instance</a></li><li class="chapter-item expanded "><a href="posts/2019-01-09-my-castle-(dotfiles-in-git).html"><strong aria-hidden="true">7.</strong> Git backed Configuration</a></li><li class="chapter-item expanded "><a href="contact.html"><strong aria-hidden="true">8.</strong> Contact</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Types and Terror</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="about"><a class="header" href="#about">About</a></h1>
<p>Hi, I'm J.</p>
<p>In 2018 I started working full time as a software developer. This gave me some time to think about how I might try to give back to the software development community.</p>
<p>I'm hoping to write about my experiences in the software industry, problems I've faced with tools and solutions/hacks that I've discovered (or been gifted) along the way as well as a few interesting algorithms that I've learnt a bit about.</p>
<p>I have a particular interest in 'safe' languages, machine learning, and logic engines. Specifically I'm a big fan of Haskell and <a href="./?search=Rust">Rust</a>, but have more experience in C++ and Python.</p>
<p>I live in Sydney with my lovely wife and Peanut, our Japanese Spitz. They mean everything to me.</p>
<hr />
<p><a href="./imgs/koz2.JPG"><img src="./imgs/koz2.JPG" alt="A view of Mount Kosciuszko" /></a></p>
<div class="center" style="font-size: smaller">Kosciuszko National Park</div>
<hr />
<div style="break-before: page; page-break-before: always;"></div><!--
published: false 
title: Setting up a Blog with Git
category: Blogging
excerpt: |
  My first post will just cover some of the steps I took to set this site up as a bit of a walk through. If you're not wanting to build a site today feel free to look through it anyway.
feature_text: |
  ## Blog: a ~~regularly~~ updated website
feature_image: "/assets/imgs/koz2.JPG"
image: "/assets/imgs/koz2.JPG"
-->
<p>Hi, I'm J. I write software for a living and actually really enjoy it. Well, most of the time.</p>
<p>I keep finding myself wanting to write up some of the things I've learnt about and the mistakes I've made. So here we are. Hopefully someone can learn from it and possibly avoid the same issues that I had.</p>
<p>My first post will just cover some of the steps I took to set this site up as a bit of a walk through. If you're not wanting to build a site today feel free to look through it anyway. I'm hoping to follow up with some tips on using Git, Shell (in particular zsh) but for now I'll try to keep it brief.</p>
<p>It'll be far easier if you already use a terminal regularly and are familiar with Git but I'll try to introduce things as they come up.</p>
<h1 id="what-are-we-using"><a class="header" href="#what-are-we-using">What are we using?</a></h1>
<p>First up, I want to thank David Darnes who make the <a href="https://alembic.darn.es">Alembic theme</a>. That theme is responsible for the majority of the styling (and a significant portion of the functionality) of the site. He did an awesome job and even included some really nice features like a service worker, RSS feed, and search and contact pages.</p>
<p>I plan to tweak it further to suit my needs but the theme is a lovely collection of useful templates and <a href="https://www.w3schools.com/css/">CSS</a> and is easy to install and use.</p>
<p>For hosting, I'm using <a href="https://pages.github.com/">Github Pages</a>, a very neat static site tool built by and integrated with Github. It takes a bunch of configuration files and pages written in <a href="https://www.markdowntutorial.com/">Markdown</a> and turns them into a site that runs on <code>$USERNAME.github.io</code> for free.</p>
<p>P.S. I'm going to use <code>this notation</code> to show that I mean a command that can be run in your terminal and <code>$this_notation</code> to show that the value might not be the same for everyone and should be something you set up or something already available in your <a href="https://www.shellscript.sh/">shell</a>.</p>
<h2 id="steps"><a class="header" href="#steps">Steps</a></h2>
<h4 id="1-get-a-github-account-or-use-one-that-you-already-have"><a class="header" href="#1-get-a-github-account-or-use-one-that-you-already-have">1. Get a Github account or use one that you already have.</a></h4>
<p>Sign up at <a href="https://github.com/">https://github.com/</a> (or you can use other hosts for git and your site if you are already familiar with them).</p>
<h4 id="2-create-a-new-repository-called-usernamegithubio"><a class="header" href="#2-create-a-new-repository-called-usernamegithubio">2. Create a new repository called <code>$USERNAME.github.io</code>.</a></h4>
<ul>
<li>Use <a href="https://github.com/new">https://github.com/new</a> if you're using Github.</li>
<li>Call it <code>$USERNAME.github.io</code> (a special repository name that tells github that you want to use it as a github pages site.</li>
</ul>
<h4 id="3-install-git"><a class="header" href="#3-install-git">3. Install 'git'</a></h4>
<p>Git is a really useful tool for managing (mostly text) files that change over time while also being edited by multiple people. It's a pretty complex piece of software so I'll point you to some other tutorials about it.</p>
<p>Here's some to get git installed on a few common platforms:</p>
<ul>
<li>For most Linux users: <code>sudo apt install git</code></li>
<li>For Mac users: I recommend <code>brew install git</code> (<a href="https://github.com/Homebrew/brew">Homebrew</a> is really awesome).</li>
<li>Setting up Git and Github on your Mac
<ul>
<li><a href="http://burnedpixel.com/blog/setting-up-git-and-github-on-your-mac/"> http://burnedpixel.com/blog/setting-up-git-and-github-on-your-mac/ </a></li>
</ul>
</li>
<li>For windows users:
<ul>
<li>Installing Git – the easy way
<ul>
<li><a href="https://gist.github.com/derhuerst/1b15ff4652a867391f03"> https://gist.github.com/derhuerst/1b15ff4652a867391f03 </a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="4-install-ruby-bundler-jekyll-an-editor-etc"><a class="header" href="#4-install-ruby-bundler-jekyll-an-editor-etc">4. Install ruby, bundler, jekyll, an editor etc.</a></h4>
<p>There's an official quite start guide to jekyll <a href="https://jekyllrb.com/docs/quickstart/">here</a> but I'll add a tldr.</p>
<ul>
<li>
<p>Linux: Again for linux users either you can probably use <code>apt install ruby</code> (or you proabably know how to install packages yourself).</p>
</li>
<li>
<p>Mac: Similar to linux <code>brew install ruby</code></p>
</li>
<li>
<p>Windows users can use <a href="https://rubyinstaller.org/">rubyinstaller</a> but I can't promise that it works particularly well.</p>
</li>
</ul>
<p>Now that we all have ruby, we can use it's package manager (gem) to install jekyll (and bundler) tools for running the site:
<code>gem install jekyll bundler</code>.</p>
<h4 id="5-create-a-new-jekyll-site"><a class="header" href="#5-create-a-new-jekyll-site">5. Create a new Jekyll site</a></h4>
<p>Now it's time to build a skeleton for your site. You can use a template online (I used the <a href="https://alembic.darn.es">Alembic theme</a>) or use <code>jekyll new $USERNAME.github.io</code> to make a completely clean new site.</p>
<ul>
<li><code>cd $USERNAME.github.io</code></li>
</ul>
<h4 id="6-set-up-your-repo"><a class="header" href="#6-set-up-your-repo">6. Set up your repo.</a></h4>
<ul>
<li>Turn the jekyll site into a git repo.
<ul>
<li><code>git init</code></li>
</ul>
</li>
<li>Add a 'remote'
<ul>
<li><code>git remote add git@github.com:$USERNAME/$USERNAME.github.io.git</code></li>
</ul>
</li>
<li>Push your code up to github for the first time!
<ul>
<li><code>git push -u origin master</code></li>
</ul>
</li>
</ul>
<h4 id="7-try-it-locally"><a class="header" href="#7-try-it-locally">7. Try it locally</a></h4>
<p>The command that we are going to use to run the site locally is:
<code>jekyll server --livereload</code></p>
<p>This tells <code>jekyll</code> the program that builds the site to run a server locally (it should be on localhost:4000. The <code>--livereload</code> flag tells jekyll to reload the site when the source files change. This makes it easy to modify the site quickly and see what the outcome is.</p>
<p>If you're looking around for things to change try looking in <code>./_posts</code>, </p>
<p>Any theme styling is in <code>./_sass</code> and some config in <code>./_config</code> and there's loads to play around with before it's 'production ready' but hopefully this gets you started.</p>
<h4 id="8-try-it-online"><a class="header" href="#8-try-it-online">8. Try it online</a></h4>
<p>When you're ready you can commit your changes to your git remote and then <code>git push</code> them up to your server.</p>
<p>Now your <code>$USERNAME.github.io</code> should be live with your site.</p>
<p>I'm working on a follow up on this post that talks more about the specifics about jekyll that surprised me. See you soon.</p>
<hr />
<div style="break-before: page; page-break-before: always;"></div><!--
published: false
title: Strategies for returning references in Rust
category:
- Rust
- Languages
-->
<p>A really neat explanation of some approaches to references in Rust.</p>
<p><a href="https://bryce.fisher-fleig.org/blog/strategies-for-returning-references-in-rust/index.html">https://bryce.fisher-fleig.org/blog/strategies-for-returning-references-in-rust/index.html</a></p>
<p>I've been trying to get my head around the borrowing semantics of Rust. I'm really interested in the possibility of improving the state of memory usage in pure languages like Haskell with linear types and while I understand that some believe that the problem is better solved with regions based management I think Rust has a pretty nice system.</p>
<p>I hope to write a bit more on linear types, regions and Rust when I understand them better.</p>
<hr />
<div style="break-before: page; page-break-before: always;"></div><!--
published: true
title: init.vim
category: [Vim, Config, Editors, Productivity]
excerpt: |
  I'm so glad that I invested some time into learning vim as I think it's saved me a lot more, and also feels nicer to use that the other editors that I have experience with.
feature_text: |
    **The best bits**
feature_image: "/assets/imgs/koz2.JPG"
image: "/assets/imgs/koz2.JPG"
-->
<p>I wanted to make a first post about how to set up Jekyll, but it turns out that doing that without talking about Git is hard... and I am not yet ready to blog about git.</p>
<p>So, I hope that the following is useful.</p>
<p>I started using vim in Uni, having previously been happy with IDEs specialised to different (fairly specific) use cases and had avoided (and frankly, not even heard of) the popular 'hackers editors': emacs, vim and gedit (I'm almost kidding, but I do actually like Gedit). I'm so glad that I invested some time into learning vim as I think it's saved me a lot more, and also feels nicer to use that the other editors that I have experience with.</p>
<h1 id="plugin-managers"><a class="header" href="#plugin-managers">Plugin managers</a></h1>
<p>First up, I find that having a plugin manager saves a tonne of time. Between <a href="https://github.com/junegunn/vim-plug">Plug</a>, <a href="https://github.com/VundleVim/Vundle.vim">Vundle</a>, <a href="https://github.com/tpope/vim-pathogen">Pathogen</a> and <a href="https://github.com/Shougo/dein.vim">dein</a> there's a lot of very good options, but personally I recommend Plug. I think it's the simplest and love that it runs asynchronously.</p>
<h1 id="colours--colors"><a class="header" href="#colours--colors">Colours || Colors</a></h1>
<p>I find colour helps me to identify when I've messed up some syntax, misspelled a keyword or otherwise made a mistake.</p>
<p>For colour schemes I have to recommend <a href="https://github.com/sjl/badwolf">badwolf</a> which plays nicely with all my syntax highlighting plugins and <a href="https://neovim.io/">Nvim</a> a Vim fork that I really like. Here's how to install it:</p>
<pre><code class="language-vim">Plugin
call plug#begin('~/.local/share/nvim/plugged') &quot; Plugins go here
Plug 'sjl/badwolf'
call plug#end()

colorscheme badwolf
</code></pre>
<p>And then run <code>:PlugInstall</code>.</p>
<p>I'd also recommend that you use the following if you don't already:</p>
<pre><code class="language-vim">syntax enable
set background=dark
</code></pre>
<p>This will turn on syntax highlighting and use a dark background (which I think has been minimizing the degradation of my eyesight).</p>
<h1 id="vim-tweaks"><a class="header" href="#vim-tweaks">Vim Tweaks</a></h1>
<p>Have you ever edited a file, closed vim and then realised that the last thing you did wasn't so perfect, only to be unable to undo it easily?
<a href="https://en.wikipedia.org/wiki/Version_control">Version control</a> helps, but isn't fine grained enough for my liking.</p>
<p>Fortunately, vim has a solution.</p>
<pre><code class="language-vim">set undofile undodir=~/.config/nvim/undo-dir
</code></pre>
<p><code>undofile</code> is the option to tell vim to store the edit history of the files you're working on. This means that when you start vim again, it'll load up all the recent changes you've made and let you undo them. This can be a super power when you add simnalamburt's <a href="https://github.com/simnalamburt/vim-mundo">Vim-mundo</a>, a tool for showing your edit history as a tree, which makes it a lot easier to find a previous state of a file. The <code>undodir</code> is the file that it stores the history in, which you can put anywhere but I keep in my nvim config directory.</p>
<h1 id="write-as-sudo"><a class="header" href="#write-as-sudo">Write as sudo</a></h1>
<p>Sometimes I edit a file only to discover that it's read only. I could quit, reopen the file with <code>visudo</code> or <code>sudoedit</code> but this is easier. p.s. <a href="https://unix.stackexchange.com/questions/181492/why-is-it-risky-to-give-sudo-vim-access-to-ordinary-users/181494">You should probably be careful with <code>sudo vim</code></a>.</p>
<pre><code class="language-vim">cmap w!! w !sudo tee &gt; /dev/null %
</code></pre>
<p>This maps <code>:w!!</code> to write via a program called tee which lets you more safely write to files as root.</p>
<p>I believe this tip may have been from <a href="https://dev.to/jovica/the-vim-trick-which-will-save-your-time-and-nerves-45pg">this post</a> by jovica but honestly I have no idea if this is where I found out about it.</p>
<h1 id="some-plugins"><a class="header" href="#some-plugins">Some plugins</a></h1>
<h4 id="tmhedbergs-matchit"><a class="header" href="#tmhedbergs-matchit">tmhedberg's <a href="https://github.com/tmhedberg/matchit">Matchit</a></a></h4>
<p>This improves vim 'find next matching bracket' functionality (by default mapped to '%'). Normally, it can match brackets in C like languages but the plugin expands it to be able to find matching tags in more complex formats like html and vim.</p>
<h4 id="tpopes-vim-enuch"><a class="header" href="#tpopes-vim-enuch">tpope's <a href="https://github.com/tpope/vim-eunuch">vim-enuch</a></a></h4>
<p>This adds a bunch of great commands to do 'unixy' things like moving, renaming and deleting files. Seriously it's amazing and includes some nice file search tools. Tpope has a bunch of <a href="https://github.com/tpope/">other great plugins too</a> and is the maintainer of <a href="https://github.com/tpope/vim-pathogen">pathogen</a>. He even wrote a <a href="https://github.com/tpope/vim-scriptease">plugin for writing plugins... </a>.</p>
<h4 id="roxmas-vim-window-resize-easy"><a class="header" href="#roxmas-vim-window-resize-easy">roxma's <a href="https://github.com/roxma/vim-window-resize-easy">vim-window-resize-easy</a></a></h4>
<p>Beautiful in it's relative simplicity, this makes vim splits easy to manage without resorting to dragging their edges around.</p>
<h4 id="junegunns-fzf"><a class="header" href="#junegunns-fzf">junegunn's <a href="https://github.com/junegunn/fzf">fzf</a></a></h4>
<p>Fzf is amazing. It is a fuzzy finder that makes finding files in large projects or just on your computer much easier. I highly recommend you install it for your terminal, editor and really anything you can get to support it. <a href="https://github.com/junegunn/fzf#installation">Installation</a> was actually a little finicky for me but here's the vim config needed for Plug.</p>
<pre><code class="language-vim">Plug 'junegunn/fzf', { 'dir': '~/.fzf', 'do': './install --all' }
Plug 'junegunn/fzf.vim'
</code></pre>
<h4 id="andrewradevs-switch"><a class="header" href="#andrewradevs-switch">AndrewRadev's <a href="https://github.com/AndrewRadev/switch.vim">switch</a></a></h4>
<p>Provides <code>:Switch</code> which lets you switch statements like 'true' to 'false'. It supports a bunch more common replacements which will save you rewriting things (and more importantly, typos) and is even configurable. Here's my config for it.</p>
<pre><code class="language-vim">Plug 'AndrewRadev/switch.vim'

...

let g:switch_custom_definitions =
    \ [
    \   ['0', '1'],
    \   ['[', ']', '(', ')', '{', '}'],
    \   ['TRUE', 'FALSE'],
    \   ['T', 'F'],
    \   ['.cc', '.h'],
    \ ]

nnoremap &lt;leader&gt;! :Switch&lt;CR&gt;
</code></pre>
<h1 id="a-final-tip-line-shoving"><a class="header" href="#a-final-tip-line-shoving">A final tip: Line 'shoving'</a></h1>
<pre><code class="language-vim">&quot;Shove down: &lt;A-j&gt;
nnoremap ∆ :m.+1&lt;CR&gt;==
nnoremap &lt;A-j&gt; :m .+1&lt;CR&gt;==
inoremap &lt;A-j&gt; &lt;Esc&gt;:m .+1&lt;CR&gt;==gi
&quot;Shove up: &lt;A-k&gt;
nnoremap ˚ :m .-2&lt;CR&gt;==
nnoremap &lt;A-k&gt; :m .-2&lt;CR&gt;==
inoremap &lt;A-k&gt; &lt;Esc&gt;:m .-2&lt;CR&gt;==gi
</code></pre>
<p>This maps Alt+j and Alt+k to swapping the current line with the line above or below it (the cursor moves with it). Useful for moving around debugging statements, re-ordering lists etc.
The ∆ and ˚ are there because my Mac keyboard uses alt for inputting special characters and I like being able to write ∂x, but I also want the mapping consistent between my computers.</p>
<hr />
<p>There we go. I have a fair bit more vim config, some of it I don't use and should clean up but mostly it's pretty helpful stuff that I think makes my life better.</p>
<p>Here's my current config, please don't copy paste without learning about what each part does (it'll make life harder when something goes wrong and you might miss out on some of the nice bits).</p>
<p><a href="https://github.com/Cypher1/Castle/blob/master/nvim/init.vim">init.vim</a></p>
<p>Note: I haven't made any effort to make it vim compatible, or even particularly backwards compatible for older versions of neovim. Use with care.</p>
<div style="break-before: page; page-break-before: always;"></div><!--
published: false
title: Lost - 13kb of js
category: [Javascript, Minifying, Games]
excerpt: |
    TODO:Excerpt here!
feature_text: |
    **We got to the moon with 4kb**
feature_image: "/assets/imgs/koz1.JPG"
image: "/assets/imgs/koz1.JPG"
-->
<p>Computers have gotten 'smarter' over time, a lot smarter. You've probably heard of <a href="https://en.wikipedia.org/wiki/Moore%27s_law">Moore's law</a>. It's hard to appreciate the vast amount of RAM our modern laptops and phones have in comparison to earlier computer.</p>
<p>The original <a href="https://en.wikipedia.org/wiki/Apollo_Guidance_Computer">Apollo guidance computer</a> had 2048 words of RAM. Each word is 16 bits, bringing the total RAM to 4kb.</p>
<p>It was used in the Apollo program to plan the route of the Command &amp; Service module and Lunar Module (https://ntrs.nasa.gov/archive/nasa/casi.ntrs.nasa.gov/20090016290.pdf) and was an amazing piece of kit at the time (1966 - 1975).</p>
<p>These days, few popular web pages can fit in 4kb. I don't think that's a bad thing, though it gives us some room for improvement. It's just a part of the cost of all the improvements that we have made.</p>
<p>It turns out that there's still a lot that can be done in just a few kilobytes and there are a bunch of competitions that are centered around this. The most famous of which (that I know of) being the <a href="https://js1k.com/">js1k</a> competition. The aim is simple: 'make a game in JavaScript that fits in 1 kilobyte'. You can <a href="https://en.wikipedia.org/wiki/Minification_(programming)">minify</a>, compress, use terse style, anything, as long as it fits in 1kb.</p>
<p>The js1k competitors are pretty amazing, I recommend playing a few of their games (they download really quickly too).</p>
<p>1kb is pretty restrictive, and I was (and am) pretty new to <a href="https://www.reddit.com/r/codegolf/">code golfing</a>, so I have yet to try the 1k variety. However, a friend of mine is a pretty awesome web developer and invited me to compete with him in the <a href="https://js13kgames.com/">js13k</a> competition. It's basically the same as the js1k games... but yeah, you get 13kb.</p>
<p>So, with 13kb to play with we could implement almost anything we liked, and definitely more things that we had time for writing from scratch.</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center"><a href="https://cypher1.github.io/13k_lost/public/">Try it out here</a></th></tr></thead><tbody>
<tr><td style="text-align: center"><a href="https://cypher1.github.io/13k_lost/public/"><img src="posts/../imgs/lost_caves.jpg" alt="Alt test" /></a></td></tr>
</tbody></table>
</div>
<p>Here's our entry on <a href="https://js13kgames.com/entries/lost-caves">js13kgames.com</a></p>
<p>And here's <a href="https://wemyss.github.io/">Sam's site</a>.</p>
<hr />
<div style="break-before: page; page-break-before: always;"></div><!--
published: false
title: The curious case of Either's Foldable instance
category: [Haskell, Types, Debugging]
excerpt: |
    TODO
feature_text: |
    **Some fun with Polymorphism**
feature_image: "/assets/imgs/koz1.JPG"
image: "/assets/imgs/koz1.JPG"
-->
<p>I recently wrote something like the following:</p>
<pre><code class="language-haskell">divOrFail :: Either Int String -&gt; Int -&gt; Either Int String
divOrFail (Left d) n
  | n==0 = Right (&quot;Cannot divide by 0&quot;)
  | (d`mod`n)/=0 = Right (&quot;Cannot divide &quot;++show d++&quot; by &quot;++show n)
  | otherwise = Left $ d`div`n
divOrFail (Right e) _ = (Right e)

applyAll :: Foldable f =&gt; (Either a err -&gt; b -&gt; Either a err) -&gt; a -&gt; f b -&gt; Either a err
applyAll func start xs = foldl func (Left start) xs
</code></pre>
<p>The original was a bit more complicated but this preserves the bug in the original.
So lets break this down a bit (or <a href="posts/2018-11-01-the-curious-case-of-foldable-either.html#the-catch">skip it</a> if you like).</p>
<p>Lets start with the more complicated part. In particular this type signature:</p>
<pre><code class="language-haskell">applyAll :: Foldable f =&gt; (Either a err -&gt; b -&gt; Either a err) -&gt; a -&gt; f b -&gt; Either a err
</code></pre>
<p>So, first ignore the type contraints (the <code>Foldable f =&gt;</code> bit) we can come back to it.
Our arguments are:</p>
<ul>
<li>a function that takes something of type <code>b</code> and either an <code>a</code> value or an error,</li>
<li>a start value</li>
<li>a thing holding things of type <code>b</code> (looking at the constraint, we can see that the 'bunch' is <a href="http://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Foldable.html#t:Foldable">foldable</a> which lets us do some neat stuff on it).</li>
</ul>
<p><code>applyAll</code> then uses <code>foldl</code> to repeatedly apply a function on a value (or an error), accumulating the result.</p>
<pre><code class="language-haskell">applyAll func start xs = foldl func (Left start) xs
</code></pre>
<p>So, that was all 'simple'. What could go wrong? <sub>/s</sub></p>
<p>The other part of the code snippet is fairly straightforward:</p>
<pre><code class="language-haskell">divOrFail :: Int -&gt; Either Int String -&gt; Either Int String
</code></pre>
<p>This is a function that takes two things:</p>
<ul>
<li>an <code>Int</code></li>
<li>something that is either an <code>Int</code> or a <code>String</code></li>
</ul>
<pre><code class="language-haskell">divOrFail n (Left d)
  | n==0 = Right (&quot;div by 0&quot;)
  | (d`mod`n)/=0 = Right (&quot;Cannot divide &quot;++show d++&quot; by &quot;++show n)
  | otherwise = Left $ d`div`n
</code></pre>
<p>When the 'something' is an <code>Int</code> that is a multiple of n we divide it by n and return the result.
If it is not divisble, we return a 'Right' containing an error message of the form (e.g. 'Cannot divide 3 by 2') which tells the user that the number wasn't able to be divided.</p>
<p><code>divOrFail _ (Right e) = (Right e)</code>
When the 'something' is a string, we return the string (e.g. an error message).</p>
<p>This allows me to write things like:</p>
<pre><code class="language-haskell">&gt; applyAll divOrFail 120 [1,2,3]
Left 20
&gt; 1*2*3*20 == 120
True
</code></pre>
<pre><code class="language-haskell">&gt; applyAll divOrFail 13 [3,0,1]
Right &quot;Cannot divide by 0&quot;
</code></pre>
<pre><code class="language-haskell">&gt; applyAll divOrFail 12 [3,4,2]
Right &quot;Cannot divide 1 by 2&quot;
</code></pre>
<p>Hopefully it's clear now that this could be handy (even though it is just a toy example).</p>
<h1 id="the-catch"><a class="header" href="#the-catch">The catch</a></h1>
<p>So, this is pretty good, right?</p>
<p>Well, not quite. See, I made a simple (foolish) mistake when I used this function.</p>
<p>Unfortunately I didn't write:</p>
<pre><code class="language-haskell">applyAll divOrFail 13 [3,0,1]
</code></pre>
<p>I wrote:</p>
<pre><code class="language-haskell">applyAll divOrFail 13 (Left [3,0,1])
</code></pre>
<p>Now this seems like it will error as <code>Either [Int] b</code> is a different type to <code>[Int]</code>, but it doesn't.
Let's check the types involved in <code>ghci</code>:</p>
<pre><code class="language-haskell">&gt; :t [3,0,1]
[3,0,1] :: Num a =&gt; [a]

&gt; :t Left [3,0,1]
Left [3,0,1] :: Num a =&gt; Either [a] b
</code></pre>
<p>So, we might have expected the types <code>[a]</code> and <code>Either [a] b</code> to be too different to fit in the same 'hole' (I did when I first found my bug).</p>
<p>But what does <code>ghci</code> say when I ask for the type (without the problematic argument)?</p>
<pre><code class="language-haskell">&gt; :t applyAll divOrFail 13
applyAll divOrFail 13 :: Foldable f =&gt; f Int -&gt; Either Int String
</code></pre>
<p>I'd never restricted the type to a list making <code>applyAll divOrFail</code> a polymorphic function.
In fact, <code>applyAll divOrFail</code> could take any <code>foldable</code> over <code>Int</code>s.
A lot of different data types implement <code>Foldable</code>, most of the 'container' types (e.g. List, Set, Map) have a <code>Foldable</code> instance. So this tells us that <code>Either [a]</code> has a <code>Foldable</code> instance. A quick search on <a href="https://www.haskell.org/hoogle/?hoogle=Foldable">hoogle</a> finds the package <code>Data.Foldable</code> and <a href="http://hackage.haskell.org/package/base-4.12.0.0/docs/src/Data.Foldable.html#line-326when">tada</a>.</p>
<p>We can now have a look at <code>Either</code>'s <code>Foldable</code> instance, specifically, the <code>foldr</code> implementation (it's <code>foldl</code> is implemented using <code>foldr</code>).</p>
<pre><code class="language-haskell">foldr _ z (Left _) = z
foldr f z (Right y) = f y z
</code></pre>
<p>We're passing in a <code>Left</code> in this case, so we can just look at that first line which takes 'something', <code>z</code> and a <code>Left</code> and returns <code>z</code>. It clearly is ignoring the value inside the <code>Left</code>!</p>
<p>Looking at the second line, as can see that it is the <code>Right</code> side of the either that the <code>foldr</code> is running the function on.</p>
<p>We can see a similar thing looking at the types.</p>
<p>In fact, if we think a bit more about the type <code>Either a b</code> it makes sense that the <code>f</code> in our <code>applyAll</code> function isn't being matched by <code>Either</code>, it's being matched by <code>Either a</code>. This means that the 'contents' of our polymorphic type, <code>f</code>, is <code>b</code>, not <code>a</code>.</p>
<p>TLDR: I had the arguments to <code>Either</code> around the wrong way and <code>Either err</code> acts as if it were a list of 0 or 1 elements.</p>
<p><a href="posts/../code/foldable_either.hs">Here's the code from above</a></p>
<div style="break-before: page; page-break-before: always;"></div><!--
published: true
title: Git backed Configuration
category: [Dotfiles, Config, Git]
excerpt: |
  What amazing tool could solve my configuration backup problem?

  Well, of course, its Git.
feature_text: |
  **a man’s home <s>directory</s> is his castle**
feature_image: "/assets/imgs/koz3.JPG"
image: "/assets/imgs/koz3.JPG"
-->
<p>I've been using Linux for a little while and along the way have accumulated a fair bit of configuration (even though I try to remove the bits I don't need anymore).</p>
<p>I often find that these configs help me out (e.g. <a href="posts/../posts/2018-10-01-init.vim-(the-best-bits).html">my Vim config</a>) so, after the first few times I lost bits of it, I spent some time ensuring that I could keep it, even if I changed computers, had a hard drive fail or went mad and wrote a bunch of terrible configuration.</p>
<p>What amazing tool could solve my configuration backup problem?</p>
<p>Well, of course, its <a href="https://en.wikipedia.org/wiki/Git">Git</a>.</p>
<p>I keep any config and useful bash scripts that I need in a git repo. This includes:</p>
<ul>
<li><a href="http://vim.wikia.com/wiki/Example_vimrc">Vim config</a></li>
<li><a href="https://wiki.archlinux.org/index.php/zsh#Sample_.zshrc_files">Zsh config</a></li>
<li><a href="https://git-scm.com/docs/git-config">Git config</a></li>
<li><a href="https://i3wm.org/docs/userguide.html">i3 config</a></li>
<li><a href="https://github.com/powerline/fonts/tree/master/Hack">a font I like</a></li>
<li>a script for setting up my favourite keyboard config</li>
<li>a list of <a href="https://pypi.org/">Python</a> and <a href="https://www.npmjs.com">NPM</a> packages I commonly use</li>
<li>a list of programs that I commonly use</li>
<li>a script that installs all the above</li>
</ul>
<p>So, lets step through what I needed to do this.</p>
<p>First, (assuming you are a Linux, or possibly Mac/BSD user) I'll assume you are familiar with a terminal (e.g. <a href="https://www.gnu.org/software/bash/">bash</a>).</p>
<pre><code class="language-bash">cd ~/.config
</code></pre>
<p>We're now in one of the most common places to store user specific configuration.
Lets setup a git repo. I recommend using <a href="https://github.com">Github</a> or <a href="https://bitbucket.org">Bitbucket</a>.</p>
<p>This should give you an identifier for your git repo, mine is <code>git@github.com:Cypher1/Castle.git</code>.</p>
<pre><code class="language-bash">git init
git remote add origin git@github.com:user/repo.git
</code></pre>
<p>Now you can add any files that you already have in <code>.config</code>.</p>
<pre><code class="language-bash">git add important_file_to_backup
git commit -m &quot;Adding important file&quot;
</code></pre>
<p>Nice enough, but we are missing our actual dotfiles (the ones stored in our home directory).</p>
<p>So, lets grab those, I'll use my <code>zshrc</code> file as an example but you should be able to substitute to make this work for any dotfile.</p>
<p>First we move the actual dot file into our repo and add it.</p>
<pre><code class="language-bash">mv ~/.zshrc ~/.config/zshrc
cd ~/.config/
git add zshrc
git commit -m &quot;Adding my zshrc&quot;
</code></pre>
<p>Now we need a bit of a trick to make it look (to our programs) like the dotfiles are still where we left them.</p>
<p>Fortunately there's a great tool for this called <a href="https://en.wikipedia.org/wiki/Symbolic_link">'soft (or symbolic) links'</a>. They make use of the structure of modern file systems to make a 'linked' version of a file or directory.</p>
<p>The utility to make soft links is called <code>ln</code> or <code>link</code> (find out more with <code>man ln</code>).</p>
<pre><code class="language-bash">ln -s ~/.config/zshrc ~/.zshrc
</code></pre>
<p>This creates a new soft link at <code>~/.zshrc</code> and connects it to <code>~/.config/zshrc</code>.</p>
<p>Now programs that open <code>~/.zshrc</code> will actually be opening <code>~/.config/zshrc</code>, so all your edits will be tracked in the git repo.</p>
<p>Always remember to upload your changes to your remote repo so that you have them backed up.</p>
<pre><code class="language-bash">git push origin master
</code></pre>
<p>I recommend learning more about <code>git</code> so that you can manage your backups and your changes to them.</p>
<p>For me, it was worth creating an installer script that does all my soft linking, and software installation.</p>
<p>You can find it <a href="https://github.com/Cypher1/Castle/blob/master/bin/arrive">here</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contact"><a class="header" href="#contact">Contact</a></h1>
<p>Feel free to write me an email <a href="mailto:jp10010101010000@gmail.com">here</a> if you need a hand, have an idea you want to discuss or find a post I can improve on.</p>
<img class="center circle-image" width="20%" src="./imgs/avatar.png"/>
<div class="footer">
  <div class="flex-grid" style="font-size: 5rem">
    <div class="col">
      <a href="https://twitter.com/AltReptile" class="center"><i class="fab fa-twitter"></i></a>
    </div>
    <div class="col">
      <a href="https://www.linkedin.com/in/prattjr" class="center"><i class="fab fa-linkedin"></i></a>
    </div>
    <div class="col">
      <a href="https://github.com/Cypher1" class="center"><i class="fab fa-github"></i></a>
    </div>
  </div>
  <div style="font-size: smaller">Icons provided by <a href="https://fontawesome.com/icons">Font Awesome</a> under a Creative Commons Attribution 4.0 International <a href="https://fontawesome.com/license">license</a>. </div>
</div>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>

        <script src="ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>

        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->

        <script type="text/javascript">
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>

    </body>
</html>
